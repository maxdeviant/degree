
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
<title>Data Structures - Array Lists</title>
<link rel="stylesheet" type="text/css" href="css/basic.css" />
<link rel="stylesheet" type="text/css" href="css/init.css" />
<link href="images/favicon.ico" rel="shortcut icon" type="image/icon" />
<link href="css/java.css" media="all" rel="stylesheet" type="text/css" />
<style type="text/css" media="print">
/* override other settings to make print-friendly appearance */
body { padding: 10px 20px; }
.print_hide { display: none; }
div.print_only { display: block; }
#header { margin-top: 0px; height: 30px; }
#content { margin-top: 25px; }
</style>
</head>
<body>

<div id="header">
<h2 style='margin:0'>
Array Lists</h2>
<div id="mtime">last modified: Feb 8, 2013</div>

<div id="toggle_all" class='print_hide'>
<a href="#">
toggle show-hides
</a>
</div>



<div id="sections" class='print_hide'>
<select name="sections">
<option value="">--- select a section ---</option>
<option value="#user-defined">User-defined data structures</option>
<option value="#arraylist-simple-example">ArrayList Demo</option>
<option value="#implementation">ArrayList Implementation</option>
<option value="#implementation-features">Implementation Features</option>
</select>
</div>

</div>

<div id="content">

<h3><a name="user-defined"></a>User-defined data structures</h3>

Why would we want to write our own implementations
of data structures when Java already has everything we need?
There are severals goals:
<ul class="notes">
<li>learn how to implement the operations</li>
<li>gain some understanding of the cost of each operation</li>
<li>understand the significance of one implementation
choice versus another.</li>
<li>
use our versions to obtain counts of operation executions
in order to create an empirical analysis of
the effect of using these data structures in applications
</li>
</ul>

In this document we will
focusing on the <tt>ArrayList</tt> class.

We will follow a method suggested by these steps:
<ol class="notes">
<li>Create illustrative examples to see the Java Collections
<tt>ArrayList</tt> member
functions work.
</li>
<li>Create a "dummy" class, 
called <tt class="file">AListAdapter</tt>, 
which implements all the relevant interfaces and
member functions that <tt>ArrayList</tt> implements, but
with implementation functions which effectively say "not implemented."
</li>
<li>
Create an extension of 
<tt>AListAdapter</tt>
called <tt class="file">AList</tt> in which  implements
the member functions by overriding the <tt>AListAdapter</tt> definitions. 
Because <tt>AList</tt> is an  <b>extension</b>
of the "working" class, <tt>AListAdapter</tt>, 
there is no need to redefine <b>every</b> function, only those
of interest to us.
</li>
</ol>

<h3><a name="arraylist-simple-example"></a>ArrayList Demo</h3>

Create a NetBeans project <tt>AListDemo</tt>. 
Assuming you use the default setup of NetBeans, the main class will be
named <tt>AListDemo</tt>.
Change the content to the following:

<div class='n'>
<div class='file_display show_hide'>
<form action="#">
<input type='hidden' name='path' value="AListDemo/src/alistdemo/AListDemo.java" />
<input type='hidden' name='lang' value="java" />
<input type='hidden' name='status' value="0" />
<input type='hidden' name='can_select' value="1" />
<span class='show_hide_label'>
alistdemo.AListDemo</span>
<a href="/~rkline/ds/showhide/target/array-lists">(click to show)</a>
</form>
<div></div>
</div>
</div>


Observe how we express the list declaration operation:
<div class='format_display'>
<span></span>
<pre class="java">List<span class="sy0">&lt;</span>String<span class="sy0">&gt;</span> L <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>String<span class="sy0">&gt;</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div>
Abstractly, we might say the statement is of the form:
<pre class="n">
<b>Interface</b> obj = new <b>Implementation</b>();
</pre>
We conceivable could use this:
<div class='format_display'>
<span></span>
<pre class="java">ArrayList<span class="sy0">&lt;</span>String<span class="sy0">&gt;</span> L <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>String<span class="sy0">&gt;</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div>

In general, the former declaration (using the <tt>List</tt> interface)
is preferred because it allows the application
to change the implementation very easily, since it is presumed
that the only operations used are those specified by the interface. 
<p></p>
If we do use some <tt>ArrayList</tt>-specific operation we wish to 
use we would need to cast the object:
<pre>
((ArrayList) L).operation
</pre>
Of course, by doing so would lose the implementation-indepency of the
code.

<h4>Explicit and Implicit operations</h4>

In the demo program, we see the usage of common list member functions:
<pre class='n'>
add, size, get, set, remove, clear, isEmpty
</pre>
Additionally, there are several operations which are used implicitly:
<ul>
<li>
<tt>String toString()</tt>: this is used when the list is printed:
<pre>
System.out.println(L);
</pre>
</li>
<li>
<tt>iterator()</tt>:  this is used to run the enhanced 
<tt>for</tt> loop:
<div class='format_display'>
<span></span>
<pre class="java"><span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw3">String</span> s<span class="sy0">:</span> L<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>s<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div>
The equivalent explicit code is this:
<div class='format_display'>
<span></span>
<pre class="java">Iterator<span class="sy0">&lt;</span>String<span class="sy0">&gt;</span> iterator <span class="sy0">=</span> L.<span class="me1">iterator</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">while</span> <span class="br0">&#40;</span>iterator.<span class="me1">hasNext</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw3">String</span> s <span class="sy0">=</span> iterator.<span class="me1">next</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>s<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div>
</li>
</ul>

<h3><a name="implementation"></a>ArrayList Implementation</h3>


We're going to construct our own implementation of <tt>ArrayList</tt> called <tt>AList</tt>.
The basic idea is that it is simply a wrapper around an array which resizes
as necessary in a manner transparent to the usage.
 
<h4><a name="adapter"></a>AListAdapter</h4>

Create a new <b>Java Class</b>:
<pre class='n'>
Class Name: <b>AListAdapter</b>
package:    <b>alist</b>
</pre>
     
Then insert the following content:
<div class='n'>
<div class='file_display show_hide'>
<form action="#">
<input type='hidden' name='path' value="AListDemo/src/alist/AListAdapter.java" />
<input type='hidden' name='lang' value="java" />
<input type='hidden' name='status' value="0" />
<input type='hidden' name='can_select' value="1" />
<span class='show_hide_label'>
alist.AListAdapter</span>
<a href="/~rkline/ds/showhide/target/array-lists">(click to show)</a>
</form>
<div></div>
</div>
</div>


The basis of our construction is an adapter class, <tt>AListAdapter</tt>.
The idea of an adapter class is that it implements all the 
<tt>ArrayList</tt> functions, but only in a <i>vacuous</i> manner.
The functions are all implemented
in the sense that their only code is to throw an
 <tt>UnsupportedOperationException</tt>.
Our user-defined <tt>AList</tt> class then will be an <i>extension</i> 
of <tt>AListAdapter</tt> and we can pick and choose the functions we
want to implement.
<p></p>
<tt>AListAdapter</tt> implicitly implements the
<tt>Collection</tt> and  <tt>Iterator</tt> interfaces as well
because they super-interfaces of <tt>List</tt>.
The <tt>Serializable</tt> interface requires no implementations and implies that
an <tt>AListAdapter</tt> object can be written to a file or sent
through the network. 
The <tt>RandomAccess</tt> interface also requires no implementations and is
only used to guarantee for users of this class that "<tt>get/set</tt>" member functions
are constant time,
<tt><big><i>O</i></big>(1)</tt>.

<h4><a name="alist"></a>AList Implementation</h4>

Create a new <b>Java Class</b>:
<pre class='n'>
Class Name: <b>AList</b>
package:    <b>alist</b>
</pre>

Then insert the following content:
<div class='n'>
<div class='file_display show_hide'>
<form action="#">
<input type='hidden' name='path' value="AListDemo/src/alist/AList.java" />
<input type='hidden' name='lang' value="java" />
<input type='hidden' name='status' value="0" />
<input type='hidden' name='can_select' value="1" />
<span class='show_hide_label'>
alist.AList</span>
<a href="/~rkline/ds/showhide/target/array-lists">(click to show)</a>
</form>
<div></div>
</div>
</div>

<h4>Test drive</h4>

In <tt>Main</tt>, add the <tt>import</tt> statement:
<div class='format_display'>
<span></span>
<pre class="java"><span class="kw1">import</span> <span class="co2">alist.AList</span><span class="sy0">;</span></pre></div>

Make this code 
replacement in both <tt>main1</tt> and <tt>main2</tt> and then
run each of these main programs:
<div class='format_display'>
<span></span>
<pre class="java"><span class="co1">//List &lt;String&gt; L = new ArrayList&lt;String&gt;();</span>
<span class="kw3">List</span> <span class="sy0">&lt;</span>String<span class="sy0">&gt;</span> L <span class="sy0">=</span> <span class="kw1">new</span> AList<span class="sy0">&lt;</span>String<span class="sy0">&gt;</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div>

<h3><a name="implementation-features"></a>Implementation Features</h3>

<h4>Basic Array handling features</h4>
 
The array must have a certain <tt>capacity</tt>
as well as a current <tt>size</tt>. 
The private data members used to handle that are these:
<div class='format_display'>
<span></span>
<pre class="java"><span class="kw1">private</span> <span class="kw4">int</span> capacity<span class="sy0">;</span>
<span class="kw1">private</span> <span class="kw4">int</span> size <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
<span class="kw1">private</span> E<span class="br0">&#91;</span><span class="br0">&#93;</span> data<span class="sy0">;</span></pre></div>
It is assumed that all member 
functions keep track of <tt>size</tt> correctly
so that we can give these definitions:
<div class='format_display'>
<span></span>
<pre class="java"><span class="kw1">public</span> <span class="kw4">int</span> size<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> size<span class="sy0">;</span> <span class="br0">&#125;</span>
<span class="kw1">public</span> <span class="kw4">boolean</span> isEmpty<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> size <span class="sy0">==</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="br0">&#125;</span>
<span class="kw1">public</span> <span class="kw4">void</span> clear<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> size <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="br0">&#125;</span></pre></div>
The primary constructor is this:
<div class='format_display'>
<span></span>
<pre class="java"><span class="kw1">public</span> AList<span class="br0">&#40;</span><span class="kw4">int</span> capacity<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">this</span>.<span class="me1">capacity</span> <span class="sy0">=</span> capacity<span class="sy0">;</span>
  data <span class="sy0">=</span> <span class="br0">&#40;</span>E<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">new</span> <span class="kw3">Object</span><span class="br0">&#91;</span>capacity<span class="br0">&#93;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div>
Observe how we must deal with creating an array of the unknown
generic type <tt>E</tt>.
If a user doesn't care to specify the <tt>capacity</tt>, these are used:
<div class='format_display'>
<span></span>
<pre class="java"><span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">int</span> DEFAULT_CAPACITY <span class="sy0">=</span> <span class="nu0">10</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">public</span> AList<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">this</span><span class="br0">&#40;</span>DEFAULT_CAPACITY<span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span></pre></div>
The most basic capacity handler is a private function which
creates a new array and copies over the old one:
<div class='format_display'>
<span></span>
<pre class="java"><span class="kw1">private</span> <span class="kw4">void</span> increaseCapacity<span class="br0">&#40;</span><span class="kw4">int</span> new_capacity<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">if</span> <span class="br0">&#40;</span>new_capacity <span class="sy0">&lt;=</span> capacity<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">return</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
  E<span class="br0">&#91;</span><span class="br0">&#93;</span> new_data <span class="sy0">=</span> <span class="br0">&#40;</span>E<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">new</span> <span class="kw3">Object</span><span class="br0">&#91;</span>new_capacity<span class="br0">&#93;</span><span class="sy0">;</span>
  <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> capacity<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    new_data<span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy0">=</span> data<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
  capacity <span class="sy0">=</span> new_capacity<span class="sy0">;</span>
  data <span class="sy0">=</span> new_data<span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div>
The most basic member function is the <tt>add</tt> function 
which adds to the array's end:
<div class='format_display'>
<span></span>
<pre class="java"><span class="kw1">public</span> <span class="kw4">boolean</span> add<span class="br0">&#40;</span>E elt<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">if</span> <span class="br0">&#40;</span>size <span class="sy0">==</span> capacity<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    increaseCapacity<span class="br0">&#40;</span>capacity<span class="sy0">*</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="sy0">;</span>  
  <span class="br0">&#125;</span>
  data<span class="br0">&#91;</span>size<span class="sy0">++</span><span class="br0">&#93;</span> <span class="sy0">=</span> elt<span class="sy0">;</span>
  <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div>
It is a design decision of sorts as to how much to increase the
capacity, but it turns out to be more efficient to use exponential
increments than arithmetic increments.

<h4>Index-related operations</h4> 

One of the key notions of a <tt>List</tt> is that it keeps track of the
<i>position</i> of elements.
The search operations use a linear
searches front to rear or vice-versa 
since there is no presumed structure on the data.
<div class='format_display'>
<span></span>
<pre class="java"><span class="kw1">public</span> <span class="kw4">int</span> indexOf<span class="br0">&#40;</span><span class="kw3">Object</span> obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> size<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>data<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">equals</span><span class="br0">&#40;</span>obj<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="kw1">return</span> i<span class="sy0">;</span>
  <span class="br0">&#125;</span>
  <span class="kw1">return</span> <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">public</span> <span class="kw4">int</span> lastIndexOf<span class="br0">&#40;</span><span class="kw3">Object</span> obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span>size<span class="sy0">;</span> i <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="sy0">--</span>i<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>data<span class="br0">&#91;</span>i<span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#93;</span>.<span class="me1">equals</span><span class="br0">&#40;</span>obj<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="kw1">return</span> i<span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
  <span class="kw1">return</span> <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">public</span> <span class="kw4">boolean</span> contains<span class="br0">&#40;</span><span class="kw3">Object</span> obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">return</span> indexOf<span class="br0">&#40;</span>obj<span class="br0">&#41;</span> <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div>
The other operations are insertion or removal at a position
which causes the data to the right of the insert or remove position
to be shifted right or left, respectively.
<div class='format_display'>
<span></span>
<pre class="java"><span class="kw1">public</span> <span class="kw4">void</span> add<span class="br0">&#40;</span><span class="kw4">int</span> index, E elt<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">if</span> <span class="br0">&#40;</span>index <span class="sy0">&gt;</span> size <span class="sy0">||</span> index <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">throw</span> <span class="kw1">new</span>
      <span class="kw3">IndexOutOfBoundsException</span><span class="br0">&#40;</span><span class="st0">&quot;Index: &quot;</span> <span class="sy0">+</span> index <span class="sy0">+</span> <span class="st0">&quot;, &quot;</span> <span class="sy0">+</span> <span class="st0">&quot;Size: &quot;</span> <span class="sy0">+</span> size<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
  <span class="kw1">if</span> <span class="br0">&#40;</span>size <span class="sy0">==</span> capacity<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    increaseCapacity<span class="br0">&#40;</span>capacity<span class="sy0">*</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="sy0">;</span> 
  <span class="br0">&#125;</span>
  <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> size<span class="sy0">;</span> i <span class="sy0">&amp;</span>gt<span class="sy0">;</span> index<span class="sy0">;</span> <span class="sy0">--</span>i<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="co1">// shift these up</span>
    data<span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy0">=</span> data<span class="br0">&#91;</span>i<span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
  data<span class="br0">&#91;</span>index<span class="br0">&#93;</span> <span class="sy0">=</span> elt<span class="sy0">;</span> <span class="co1">// insert this one</span>
  <span class="sy0">++</span>size<span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">public</span> E remove<span class="br0">&#40;</span><span class="kw4">int</span> index<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">if</span> <span class="br0">&#40;</span>index <span class="sy0">&gt;=</span> size <span class="sy0">||</span> index <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">throw</span> <span class="kw1">new</span>
      <span class="kw3">IndexOutOfBoundsException</span><span class="br0">&#40;</span><span class="st0">&quot;Index: &quot;</span> <span class="sy0">+</span> index <span class="sy0">+</span> <span class="st0">&quot;, &quot;</span> <span class="sy0">+</span> <span class="st0">&quot;Size: &quot;</span> <span class="sy0">+</span> size<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
  E saved <span class="sy0">=</span> data<span class="br0">&#91;</span>size<span class="br0">&#93;</span><span class="sy0">;</span>
  <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span>index<span class="sy0">;</span> i <span class="sy0">&amp;</span>lt<span class="sy0">;</span> size<span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">&#41;</span> <span class="br0">&#123;</span>  <span class="co1">// shift elements down</span>
    data<span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy0">=</span> data<span class="br0">&#91;</span>i<span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
  <span class="sy0">--</span>size<span class="sy0">;</span>
  <span class="kw1">return</span> saved<span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">public</span> <span class="kw4">boolean</span> remove<span class="br0">&#40;</span><span class="kw3">Object</span> o<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw4">int</span> i <span class="sy0">=</span> indexOf<span class="br0">&#40;</span>o<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw1">if</span> <span class="br0">&#40;</span>i <span class="sy0">==</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span>
  remove<span class="br0">&#40;</span>i<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div>


<h4>The iterator and other support operations</h4>

We mentioned above about the implicitly used member functions
<tt>iterator</tt> and <tt>toString</tt>. 
In order to handle these situations we use the following functions:
<div class='format_display'>
<span></span>
<pre class="java"><span class="kw1">public</span> <span class="kw3">Object</span><span class="br0">&#91;</span><span class="br0">&#93;</span> toArray<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="kw3">Arrays</span>.<span class="me1">copyOf</span><span class="br0">&#40;</span>data, size<span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
<span class="kw1">public</span> <span class="kw3">String</span> toString<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="kw3">Arrays</span>.<span class="me1">toString</span><span class="br0">&#40;</span>toArray<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
<span class="kw1">public</span> ListIterator<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> listIterator<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">return</span> <span class="kw3">Arrays</span>.<span class="me1">asList</span><span class="br0">&#40;</span> <span class="br0">&#40;</span>E<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> toArray<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>.<span class="me1">listIterator</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">public</span> Iterator<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> iterator<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> listIterator<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span></pre></div>
<p></p>

The textbook goes to pains to illustrate how to define the <tt>iterator</tt>.
We have side-stepped the issue by:
<ul class='notes'>
<li>using the <tt>Arrays.asList</tt> operator to define
the <tt>listIterator</tt> function</li>
<li>defining the <tt>iterator</tt> function as the result of the
<tt>listIterator</tt> function</li>
</ul>
 
<h4>Creating the iterator from scratch</h4>
If we want to define these ourselves, we can either
defined the <tt>iterator</tt> function which returns an
implementation of the <tt>Iterator</tt> interface with these functions:
<pre class='n lh3'>
public boolean hasNext()
public E next()
public void remove()
</pre>
or define the <tt>listIterator</tt> function which returns
an implementation of the extended <tt>ListIterator</tt> interface
with these additional functions:
<pre class='n lh3'>
public int nextIndex()
public E previous()
public int previousIndex()
public void add(E elt)
public void set(E elt)
public boolean hasPrevious()
</pre>
The <tt>add</tt> and <tt>remove</tt> 
operations are potentially the most difficult,
but, according to the Java documentation, these operations are 
"optional", which means that we can implement them by saying that
they're not implemented, which in Java terms means:
<pre class='n'>
throw new UnsupportedOperationException();
</pre>
The other point noted in the textbook is that the 
implementation class needs to be an <b>inner</b> class
so that it can access the private data. Since this class 
need never be reused, we'll make it an <b>anonymous</b> inner class,
giving us a definition like this:
<div class='format_display'>
<span></span>
<pre class="java"><span class="kw1">public</span> ListIterator<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> listIterator<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">return</span> <span class="kw1">new</span> ListIterator<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">private</span> <span class="kw4">int</span> index <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">boolean</span> hasNext<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> index <span class="sy0">&lt;</span> size<span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw1">public</span> E next<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> data<span class="br0">&#91;</span>index<span class="sy0">++</span><span class="br0">&#93;</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">int</span> nextIndex<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> index<span class="sy0">+</span><span class="nu0">1</span><span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw1">public</span> <span class="kw4">int</span> previousIndex<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> index<span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw1">public</span> E previous<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> data<span class="br0">&#91;</span><span class="sy0">--</span>index<span class="br0">&#93;</span><span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw1">public</span> <span class="kw4">void</span> set<span class="br0">&#40;</span>E elt<span class="br0">&#41;</span> <span class="br0">&#123;</span> data<span class="br0">&#91;</span>index<span class="br0">&#93;</span> <span class="sy0">=</span> e<span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw1">public</span> <span class="kw4">boolean</span> hasPrevious<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> index <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">void</span> remove<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">throw</span> <span class="kw1">new</span> <span class="kw3">UnsupportedOperationException</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span>
    <span class="kw1">public</span> <span class="kw4">void</span> add<span class="br0">&#40;</span>E elt<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">throw</span> <span class="kw1">new</span> <span class="kw3">UnsupportedOperationException</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span>
  <span class="br0">&#125;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div>
</div><!--content-->


<script type="text/javascript" src="/javascript/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="/~rkline/js/init.js"></script>




<p></p>
<div style="font-size:80%;line-height:13px;padding-bottom:5px;">
<hr />
<span style='float:right'>&copy; Robert M. Kline</span>
<div class='print_hide'>
&nbsp;
<div>
</div>

</body>
</html>